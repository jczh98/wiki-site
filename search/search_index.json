{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to Neverfelly's Wiki site \u00b6 There's only some useless knowledge for my own recording. Mainly about Computer Graphics, minority are C/C++, Machine Learning and Computer Vision, Reinforcement Learning.","title":"Introduction"},{"location":"#welcome-to-neverfellys-wiki-site","text":"There's only some useless knowledge for my own recording. Mainly about Computer Graphics, minority are C/C++, Machine Learning and Computer Vision, Reinforcement Learning.","title":"Welcome to Neverfelly's Wiki site"},{"location":"graphics/rendering/basic/","text":"Basic \u00b6 Rendering Equation \u00b6 L_{\\text{o}}(\\mathbf x,\\, \\omega_{\\text{o}},\\, \\lambda,\\, t) \\,=\\, L_{\\text{e}}(\\mathbf x,\\, \\omega_{\\text{o}},\\, \\lambda,\\, t) \\ +\\, \\int_\\Omega f_{\\text{r}}(\\mathbf x,\\, \\omega_{\\text{i}},\\, \\omega_{\\text{o}},\\, \\lambda,\\, t)\\, L_{\\text{i}}(\\mathbf x,\\, \\omega_{\\text{i}},\\, \\lambda,\\, t)\\, (\\omega_{\\text{i}}\\,\\cdot\\,\\mathbf n)\\, \\operatorname d \\omega_{\\text{i}} L_{\\text{o}}(\\mathbf x,\\, \\omega_{\\text{o}},\\, \\lambda,\\, t) \\,=\\, L_{\\text{e}}(\\mathbf x,\\, \\omega_{\\text{o}},\\, \\lambda,\\, t) \\ +\\, \\int_\\Omega f_{\\text{r}}(\\mathbf x,\\, \\omega_{\\text{i}},\\, \\omega_{\\text{o}},\\, \\lambda,\\, t)\\, L_{\\text{i}}(\\mathbf x,\\, \\omega_{\\text{i}},\\, \\lambda,\\, t)\\, (\\omega_{\\text{i}}\\,\\cdot\\,\\mathbf n)\\, \\operatorname d \\omega_{\\text{i}} \\omega_{i} \\omega_{i} \u662f\u5165\u5c04\u5149\u7684\u8d1f\u65b9\u5411 \\lambda \\lambda \u662f\u6ce2\u957f \\omega_{i}\\cdot \\mathbf{n} \\omega_{i}\\cdot \\mathbf{n} \u4e5f\u53ef\u4ee5\u5199\u4f5c \\cos\\theta_i \\cos\\theta_i","title":"Basic"},{"location":"graphics/rendering/basic/#basic","text":"","title":"Basic"},{"location":"graphics/rendering/basic/#rendering-equation","text":"L_{\\text{o}}(\\mathbf x,\\, \\omega_{\\text{o}},\\, \\lambda,\\, t) \\,=\\, L_{\\text{e}}(\\mathbf x,\\, \\omega_{\\text{o}},\\, \\lambda,\\, t) \\ +\\, \\int_\\Omega f_{\\text{r}}(\\mathbf x,\\, \\omega_{\\text{i}},\\, \\omega_{\\text{o}},\\, \\lambda,\\, t)\\, L_{\\text{i}}(\\mathbf x,\\, \\omega_{\\text{i}},\\, \\lambda,\\, t)\\, (\\omega_{\\text{i}}\\,\\cdot\\,\\mathbf n)\\, \\operatorname d \\omega_{\\text{i}} L_{\\text{o}}(\\mathbf x,\\, \\omega_{\\text{o}},\\, \\lambda,\\, t) \\,=\\, L_{\\text{e}}(\\mathbf x,\\, \\omega_{\\text{o}},\\, \\lambda,\\, t) \\ +\\, \\int_\\Omega f_{\\text{r}}(\\mathbf x,\\, \\omega_{\\text{i}},\\, \\omega_{\\text{o}},\\, \\lambda,\\, t)\\, L_{\\text{i}}(\\mathbf x,\\, \\omega_{\\text{i}},\\, \\lambda,\\, t)\\, (\\omega_{\\text{i}}\\,\\cdot\\,\\mathbf n)\\, \\operatorname d \\omega_{\\text{i}} \\omega_{i} \\omega_{i} \u662f\u5165\u5c04\u5149\u7684\u8d1f\u65b9\u5411 \\lambda \\lambda \u662f\u6ce2\u957f \\omega_{i}\\cdot \\mathbf{n} \\omega_{i}\\cdot \\mathbf{n} \u4e5f\u53ef\u4ee5\u5199\u4f5c \\cos\\theta_i \\cos\\theta_i","title":"Rendering Equation"},{"location":"graphics/rendering/bsdfs/","text":"BSDF\u91cd\u8981\u6027\u91c7\u6837 \u00b6 Diffuse Reflection \u00b6 \u534a\u7403\u65b9\u5411\u4f59\u5f26\u91c7\u6837\u53ef\u5f97\u51fa\u5c04\u5149 \\omega_o \\omega_o p(\\omega)=\\frac{\\cos\\theta}{\\pi} p(\\omega)=\\frac{\\cos\\theta}{\\pi} Microfacet \u00b6 \u901a\u5e38\u5bf9\u4e8e\u5fae\u8868\u9762\u65b9\u6cd5\u53ef\u4ee5\u76f4\u63a5\u91c7\u6837\u6cd5\u7ebf\u5206\u5e03\u51fd\u6570 \u56e0\u4e3a \\int_{\\mathrm{H^2}}D(\\omega_h)\\cos\\theta_h d \\omega_h=1 \\int_{\\mathrm{H^2}}D(\\omega_h)\\cos\\theta_h d \\omega_h=1 \uff0c\u6240\u4ee5\u5fae\u8868\u9762pdf\u7b49\u4e8e D(\\omega_h)\\cos\\theta_h D(\\omega_h)\\cos\\theta_h NDF\u6cd5\u7ebf\u5206\u5e03\u51fd\u6570 \u00b6 Beckmann \u00b6 \u5404\u5411\u5f02\u5411\u6027Beckmann-Spizzichino\u6a21\u578b $$ D\\left(\\omega_{\\mathrm{h}}\\right)=\\frac{\\mathrm{e}^{-\\tan ^{2} \\theta_{\\mathrm{h}}\\left(\\cos ^{2} \\phi_{\\mathrm{h}} / \\alpha_{x}^{2}+\\sin ^{2} \\phi_{\\mathrm{h}} / \\alpha_{y}^{2}\\right)}}{\\pi \\alpha_{x} \\alpha_{y} \\cos ^{4} \\theta_{\\mathrm{h}}} $$ \u56e0\u4e3a\u6709 p(\\omega_h)=D(\\omega_h)\\cos\\theta_h p(\\omega_h)=D(\\omega_h)\\cos\\theta_h , \u8f6c\u6362\u6210\u6210\u7403\u5750\u6807\u8868\u793a p(\\omega_h)\\sin\\theta_h=p(\\theta_h,\\phi_h) p(\\omega_h)\\sin\\theta_h=p(\\theta_h,\\phi_h) ,\u53c8\u56e0\u4e3a \\theta, \\phi \\theta, \\phi \u662f\u72ec\u7acb\u4e8b\u4ef6\uff0c\u6240\u4ee5 p(\\theta_h,\\phi_h)=p(\\theta_h)p(\\phi_h) p(\\theta_h,\\phi_h)=p(\\theta_h)p(\\phi_h) ,\u800c p(\\phi_h) p(\\phi_h) \u662f\u5747\u5300\u5206\u5e03\u7b49\u4e8e {1\\over 2\\pi} {1\\over 2\\pi} ,\u6240\u4ee5\u53ef\u4ee5\u7b97\u51fa p(\\theta_h)=2\\pi\\sin\\theta_h\\cos\\theta_hD(\\omega_h) p(\\theta_h)=2\\pi\\sin\\theta_h\\cos\\theta_hD(\\omega_h) ,\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u6c42\u5f97cdf P(\\theta)=\\int p(\\theta)\\mathrm d\\theta=1-\\mathrm{e}^{-\\tan ^{2} \\theta (\\frac{\\cos^2\\phi}{\\alpha_x^2}+\\frac{\\sin^2\\phi}{\\alpha_y^2})} P(\\theta)=\\int p(\\theta)\\mathrm d\\theta=1-\\mathrm{e}^{-\\tan ^{2} \\theta (\\frac{\\cos^2\\phi}{\\alpha_x^2}+\\frac{\\sin^2\\phi}{\\alpha_y^2})} ,\u4ee4 \\xi_1=P(\\theta),\\xi_2=P(\\phi) \\xi_1=P(\\theta),\\xi_2=P(\\phi) \uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u6839\u636einverse sampling\u6c42\u5f97\u7403\u5750\u6807\u4e0a\u5747\u5300\u91c7\u6837\u7684 \\theta, \\phi \\theta, \\phi ,\u518d\u5c06\u7403\u5750\u6807\u4ee3\u6362\u56de \\omega_h=(\\sin\\theta_h\\cos\\phi_h,\\sin\\theta_h\\sin\\phi_h,\\cos\\theta_h) \\omega_h=(\\sin\\theta_h\\cos\\phi_h,\\sin\\theta_h\\sin\\phi_h,\\cos\\theta_h) \u5c31\u5b8c\u6210\u4e86\u5bf9 \\omega_h \\omega_h \u65b9\u5411\u7684\u91cd\u8981\u6027\u91c7\u6837 \u6709\u4e86 \\omega_h \\omega_h \u5c31\u4ee3\u8868\u6709\u4e86\u8868\u9762\u7684\u6cd5\u7ebf\uff0c\u4f9d\u636e\u5bf9\u79f0\u6839\u636e \\omega_i \\omega_i \u5c31\u53ef\u4ee5\u76f4\u63a5\u6c42\u5f97\u91c7\u6837\u540e\u7684\u51fa\u5c04\u5149\u7ebf \\omega_o \\omega_o \u4e4b\u524d\u8bf4\u5230\u5bf9\u4e8e\u91c7\u6837 \\omega_h \\omega_h \u7684pdf\u7b49\u4e8e D(\\omega_h)\\cos\\theta_h D(\\omega_h)\\cos\\theta_h ,\u90a3\u4e48\u5bf9\u4e8e\u91c7\u6837 \\omega_o \\omega_o ,\u8fd9\u4e24\u8005\u5206\u5e03\u5e76\u4e0d\u76f8\u7b49\uff0c\u9700\u8981\u5c06 p(\\omega_h) p(\\omega_h) \u8f6c\u6362\u5230 p(\\omega_o) p(\\omega_o) , \\int p(\\theta_o)\\mathrm{d}\\theta_o=1,\\int p(\\theta_o)\\mathrm{d}\\theta_o=1 \\int p(\\theta_o)\\mathrm{d}\\theta_o=1,\\int p(\\theta_o)\\mathrm{d}\\theta_o=1 \uff0c\u53ea\u9700\u8981\u8003\u8651 {\\mathrm{d}\\omega_h\\over \\mathrm d{\\omega_o}} {\\mathrm{d}\\omega_h\\over \\mathrm d{\\omega_o}} \u4e4b\u95f4\u7684\u5173\u7cfb\u5c31\u53ef\u4ee5\u53d8\u6362\u8fc7\u53bb,\u800c\u4ece\u51e0\u4f55\u89d2\u5ea6\u8003\u8651\u53ef\u5f97 \\theta_o=2\\theta_h,\\phi_h=\\phi_o \\theta_o=2\\theta_h,\\phi_h=\\phi_o $$ \\begin{aligned} \\frac{\\mathrm{d} \\omega_{\\mathrm{h}}}{\\mathrm{d} \\omega_{\\mathrm{o}}} &=\\frac{\\sin \\theta_{\\mathrm{h}} \\mathrm{d} \\theta_{\\mathrm{h}} \\mathrm{d} \\phi_{\\mathrm{h}}}{\\sin 2 \\theta_{\\mathrm{h}} 2 \\mathrm{d} \\theta_{\\mathrm{h}} \\mathrm{d} \\phi_{\\mathrm{h}}} \\ &=\\frac{\\sin \\theta_{\\mathrm{h}}}{4 \\cos \\theta_{\\mathrm{h}} \\sin \\theta_{\\mathrm{h}}} \\ &=\\frac{1}{4 \\cos \\theta_{\\mathrm{h}}} \\ &=\\frac{1}{4\\left(\\omega_{\\mathrm{o}} \\cdot \\omega_{\\mathrm{h}}\\right)} \\end{aligned} $$ \u6240\u4ee5\u53ef\u5f97 p(\\omega_o)=\\frac{p(\\omega_h)}{4(\\omega_o\\cdot\\omega_h)} p(\\omega_o)=\\frac{p(\\omega_h)}{4(\\omega_o\\cdot\\omega_h)} GGX(Trowbridge-Reitz) \u00b6 D\\left(\\omega_{\\mathrm{h}}\\right)=\\frac{1}{\\pi \\alpha_{x} \\alpha_{y} \\cos ^{4} \\theta_{\\mathrm{h}}\\left(1+\\tan ^{2} \\theta_{\\mathrm{h}}\\left(\\cos ^{2} \\phi_{\\mathrm{h}} / \\alpha_{x}^{2}+\\sin ^{2} \\phi_{\\mathrm{h}} / \\alpha_{y}^{2}\\right)\\right)^{2}} D\\left(\\omega_{\\mathrm{h}}\\right)=\\frac{1}{\\pi \\alpha_{x} \\alpha_{y} \\cos ^{4} \\theta_{\\mathrm{h}}\\left(1+\\tan ^{2} \\theta_{\\mathrm{h}}\\left(\\cos ^{2} \\phi_{\\mathrm{h}} / \\alpha_{x}^{2}+\\sin ^{2} \\phi_{\\mathrm{h}} / \\alpha_{y}^{2}\\right)\\right)^{2}} \u91c7\u6837\u65b9\u6cd5\u4e0eBeckmann\u4e00\u81f4","title":"BSDF\u91cd\u8981\u6027\u91c7\u6837"},{"location":"graphics/rendering/bsdfs/#bsdf","text":"","title":"BSDF\u91cd\u8981\u6027\u91c7\u6837"},{"location":"graphics/rendering/bsdfs/#diffuse-reflection","text":"\u534a\u7403\u65b9\u5411\u4f59\u5f26\u91c7\u6837\u53ef\u5f97\u51fa\u5c04\u5149 \\omega_o \\omega_o p(\\omega)=\\frac{\\cos\\theta}{\\pi} p(\\omega)=\\frac{\\cos\\theta}{\\pi}","title":"Diffuse Reflection"},{"location":"graphics/rendering/bsdfs/#microfacet","text":"\u901a\u5e38\u5bf9\u4e8e\u5fae\u8868\u9762\u65b9\u6cd5\u53ef\u4ee5\u76f4\u63a5\u91c7\u6837\u6cd5\u7ebf\u5206\u5e03\u51fd\u6570 \u56e0\u4e3a \\int_{\\mathrm{H^2}}D(\\omega_h)\\cos\\theta_h d \\omega_h=1 \\int_{\\mathrm{H^2}}D(\\omega_h)\\cos\\theta_h d \\omega_h=1 \uff0c\u6240\u4ee5\u5fae\u8868\u9762pdf\u7b49\u4e8e D(\\omega_h)\\cos\\theta_h D(\\omega_h)\\cos\\theta_h","title":"Microfacet"},{"location":"graphics/rendering/bsdfs/#ndf","text":"","title":"NDF\u6cd5\u7ebf\u5206\u5e03\u51fd\u6570"},{"location":"graphics/rendering/bsdfs/#beckmann","text":"\u5404\u5411\u5f02\u5411\u6027Beckmann-Spizzichino\u6a21\u578b $$ D\\left(\\omega_{\\mathrm{h}}\\right)=\\frac{\\mathrm{e}^{-\\tan ^{2} \\theta_{\\mathrm{h}}\\left(\\cos ^{2} \\phi_{\\mathrm{h}} / \\alpha_{x}^{2}+\\sin ^{2} \\phi_{\\mathrm{h}} / \\alpha_{y}^{2}\\right)}}{\\pi \\alpha_{x} \\alpha_{y} \\cos ^{4} \\theta_{\\mathrm{h}}} $$ \u56e0\u4e3a\u6709 p(\\omega_h)=D(\\omega_h)\\cos\\theta_h p(\\omega_h)=D(\\omega_h)\\cos\\theta_h , \u8f6c\u6362\u6210\u6210\u7403\u5750\u6807\u8868\u793a p(\\omega_h)\\sin\\theta_h=p(\\theta_h,\\phi_h) p(\\omega_h)\\sin\\theta_h=p(\\theta_h,\\phi_h) ,\u53c8\u56e0\u4e3a \\theta, \\phi \\theta, \\phi \u662f\u72ec\u7acb\u4e8b\u4ef6\uff0c\u6240\u4ee5 p(\\theta_h,\\phi_h)=p(\\theta_h)p(\\phi_h) p(\\theta_h,\\phi_h)=p(\\theta_h)p(\\phi_h) ,\u800c p(\\phi_h) p(\\phi_h) \u662f\u5747\u5300\u5206\u5e03\u7b49\u4e8e {1\\over 2\\pi} {1\\over 2\\pi} ,\u6240\u4ee5\u53ef\u4ee5\u7b97\u51fa p(\\theta_h)=2\\pi\\sin\\theta_h\\cos\\theta_hD(\\omega_h) p(\\theta_h)=2\\pi\\sin\\theta_h\\cos\\theta_hD(\\omega_h) ,\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u6c42\u5f97cdf P(\\theta)=\\int p(\\theta)\\mathrm d\\theta=1-\\mathrm{e}^{-\\tan ^{2} \\theta (\\frac{\\cos^2\\phi}{\\alpha_x^2}+\\frac{\\sin^2\\phi}{\\alpha_y^2})} P(\\theta)=\\int p(\\theta)\\mathrm d\\theta=1-\\mathrm{e}^{-\\tan ^{2} \\theta (\\frac{\\cos^2\\phi}{\\alpha_x^2}+\\frac{\\sin^2\\phi}{\\alpha_y^2})} ,\u4ee4 \\xi_1=P(\\theta),\\xi_2=P(\\phi) \\xi_1=P(\\theta),\\xi_2=P(\\phi) \uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u6839\u636einverse sampling\u6c42\u5f97\u7403\u5750\u6807\u4e0a\u5747\u5300\u91c7\u6837\u7684 \\theta, \\phi \\theta, \\phi ,\u518d\u5c06\u7403\u5750\u6807\u4ee3\u6362\u56de \\omega_h=(\\sin\\theta_h\\cos\\phi_h,\\sin\\theta_h\\sin\\phi_h,\\cos\\theta_h) \\omega_h=(\\sin\\theta_h\\cos\\phi_h,\\sin\\theta_h\\sin\\phi_h,\\cos\\theta_h) \u5c31\u5b8c\u6210\u4e86\u5bf9 \\omega_h \\omega_h \u65b9\u5411\u7684\u91cd\u8981\u6027\u91c7\u6837 \u6709\u4e86 \\omega_h \\omega_h \u5c31\u4ee3\u8868\u6709\u4e86\u8868\u9762\u7684\u6cd5\u7ebf\uff0c\u4f9d\u636e\u5bf9\u79f0\u6839\u636e \\omega_i \\omega_i \u5c31\u53ef\u4ee5\u76f4\u63a5\u6c42\u5f97\u91c7\u6837\u540e\u7684\u51fa\u5c04\u5149\u7ebf \\omega_o \\omega_o \u4e4b\u524d\u8bf4\u5230\u5bf9\u4e8e\u91c7\u6837 \\omega_h \\omega_h \u7684pdf\u7b49\u4e8e D(\\omega_h)\\cos\\theta_h D(\\omega_h)\\cos\\theta_h ,\u90a3\u4e48\u5bf9\u4e8e\u91c7\u6837 \\omega_o \\omega_o ,\u8fd9\u4e24\u8005\u5206\u5e03\u5e76\u4e0d\u76f8\u7b49\uff0c\u9700\u8981\u5c06 p(\\omega_h) p(\\omega_h) \u8f6c\u6362\u5230 p(\\omega_o) p(\\omega_o) , \\int p(\\theta_o)\\mathrm{d}\\theta_o=1,\\int p(\\theta_o)\\mathrm{d}\\theta_o=1 \\int p(\\theta_o)\\mathrm{d}\\theta_o=1,\\int p(\\theta_o)\\mathrm{d}\\theta_o=1 \uff0c\u53ea\u9700\u8981\u8003\u8651 {\\mathrm{d}\\omega_h\\over \\mathrm d{\\omega_o}} {\\mathrm{d}\\omega_h\\over \\mathrm d{\\omega_o}} \u4e4b\u95f4\u7684\u5173\u7cfb\u5c31\u53ef\u4ee5\u53d8\u6362\u8fc7\u53bb,\u800c\u4ece\u51e0\u4f55\u89d2\u5ea6\u8003\u8651\u53ef\u5f97 \\theta_o=2\\theta_h,\\phi_h=\\phi_o \\theta_o=2\\theta_h,\\phi_h=\\phi_o $$ \\begin{aligned} \\frac{\\mathrm{d} \\omega_{\\mathrm{h}}}{\\mathrm{d} \\omega_{\\mathrm{o}}} &=\\frac{\\sin \\theta_{\\mathrm{h}} \\mathrm{d} \\theta_{\\mathrm{h}} \\mathrm{d} \\phi_{\\mathrm{h}}}{\\sin 2 \\theta_{\\mathrm{h}} 2 \\mathrm{d} \\theta_{\\mathrm{h}} \\mathrm{d} \\phi_{\\mathrm{h}}} \\ &=\\frac{\\sin \\theta_{\\mathrm{h}}}{4 \\cos \\theta_{\\mathrm{h}} \\sin \\theta_{\\mathrm{h}}} \\ &=\\frac{1}{4 \\cos \\theta_{\\mathrm{h}}} \\ &=\\frac{1}{4\\left(\\omega_{\\mathrm{o}} \\cdot \\omega_{\\mathrm{h}}\\right)} \\end{aligned} $$ \u6240\u4ee5\u53ef\u5f97 p(\\omega_o)=\\frac{p(\\omega_h)}{4(\\omega_o\\cdot\\omega_h)} p(\\omega_o)=\\frac{p(\\omega_h)}{4(\\omega_o\\cdot\\omega_h)}","title":"Beckmann"},{"location":"graphics/rendering/bsdfs/#ggxtrowbridge-reitz","text":"D\\left(\\omega_{\\mathrm{h}}\\right)=\\frac{1}{\\pi \\alpha_{x} \\alpha_{y} \\cos ^{4} \\theta_{\\mathrm{h}}\\left(1+\\tan ^{2} \\theta_{\\mathrm{h}}\\left(\\cos ^{2} \\phi_{\\mathrm{h}} / \\alpha_{x}^{2}+\\sin ^{2} \\phi_{\\mathrm{h}} / \\alpha_{y}^{2}\\right)\\right)^{2}} D\\left(\\omega_{\\mathrm{h}}\\right)=\\frac{1}{\\pi \\alpha_{x} \\alpha_{y} \\cos ^{4} \\theta_{\\mathrm{h}}\\left(1+\\tan ^{2} \\theta_{\\mathrm{h}}\\left(\\cos ^{2} \\phi_{\\mathrm{h}} / \\alpha_{x}^{2}+\\sin ^{2} \\phi_{\\mathrm{h}} / \\alpha_{y}^{2}\\right)\\right)^{2}} \u91c7\u6837\u65b9\u6cd5\u4e0eBeckmann\u4e00\u81f4","title":"GGX(Trowbridge-Reitz)"},{"location":"graphics/rendering/offline/","text":"PathTracing \u00b6","title":"Offline"},{"location":"graphics/rendering/offline/#pathtracing","text":"","title":"PathTracing"},{"location":"graphics/rendering/reflection/","text":"Reflection \u00b6 Lambertian \u00b6 f_r=\\frac{R}{\\pi} f_r=\\frac{R}{\\pi} \u4e3a\u4ec0\u4e48\u6709 \\pi \\pi \\rho_{\\mathrm{hd}} \\rho_{\\mathrm{hd}} \u4ee3\u8868\u534a\u7403\u4e0a\u603b\u53cd\u7167\u5ea6 \\rho_{\\mathrm{hd}}\\left(\\omega_{\\mathrm{o}}\\right)=\\int_{\\mathrm{H}^{2}(\\mathrm{n})} f_{\\mathrm{r}}\\left(\\mathrm{p}, \\omega_{\\mathrm{o}}, \\omega_{\\mathrm{i}}\\right)\\left|\\cos \\theta_{\\mathrm{i}}\\right| \\mathrm{d} \\omega_{\\mathrm{i}} \\rho_{\\mathrm{hd}}\\left(\\omega_{\\mathrm{o}}\\right)=\\int_{\\mathrm{H}^{2}(\\mathrm{n})} f_{\\mathrm{r}}\\left(\\mathrm{p}, \\omega_{\\mathrm{o}}, \\omega_{\\mathrm{i}}\\right)\\left|\\cos \\theta_{\\mathrm{i}}\\right| \\mathrm{d} \\omega_{\\mathrm{i}} \u56e0\u4e3aLambertian\u7684brdf\u662f\u5e38\u91cf\u503c\u6240\u4ee5 \\rho_{\\mathrm{hd}}=R \\rho_{\\mathrm{hd}}=R ,\u800c f_{\\mathrm{r}} f_{\\mathrm{r}} \u4e0e \\omega_{\\mathrm{o}},\\omega_{\\mathrm{i}},\\mathrm{p} \\omega_{\\mathrm{o}},\\omega_{\\mathrm{i}},\\mathrm{p} \u65e0\u5173\uff0c\u6240\u4ee5Lambertian BRDF\u7b49\u4e8e \\frac{\\rho_{\\mathrm{hd}}}{\\int_{\\mathrm{H}^2}\\left|\\cos\\theta_{\\mathrm{i}}\\right|\\mathrm{d}\\omega_{\\mathrm{i}}} \\frac{\\rho_{\\mathrm{hd}}}{\\int_{\\mathrm{H}^2}\\left|\\cos\\theta_{\\mathrm{i}}\\right|\\mathrm{d}\\omega_{\\mathrm{i}}} ,\u5bf9\u534a\u7403\u79ef\u5206\u53ef\u4ee5\u5f97\u5230 \\pi \\pi \u5173\u4e8e\u534a\u7403\u79ef\u5206 \\int_{\\mathrm{H}^2}\\left|\\cos\\theta_{\\mathrm{i}}\\right|\\mathrm{d}\\omega_{\\mathrm{i}} \\\\ =\\int_{\\phi=0}^{2\\pi}\\int_{\\theta=0}^{\\pi \\over 2}\\cos\\theta\\sin\\theta\\mathrm{d}\\theta\\mathrm{d}\\mathrm{\\phi}=\\pi \\int_{\\mathrm{H}^2}\\left|\\cos\\theta_{\\mathrm{i}}\\right|\\mathrm{d}\\omega_{\\mathrm{i}} \\\\ =\\int_{\\phi=0}^{2\\pi}\\int_{\\theta=0}^{\\pi \\over 2}\\cos\\theta\\sin\\theta\\mathrm{d}\\theta\\mathrm{d}\\mathrm{\\phi}=\\pi \u8fd0\u7528 \\sin2\\theta=2\\sin\\theta\\cos\\theta \\sin2\\theta=2\\sin\\theta\\cos\\theta \u5c31\u5f88\u597d\u8ba1\u7b97\u4e86 Fresnell\u516c\u5f0f \u00b6 Dielectric-Dielectric \u00b6 r_s=\\frac{n_i\\cos\\theta_i-n_t\\cos\\theta_t}{n_i\\cos\\theta_i+n_t\\cos\\theta_t} r_s=\\frac{n_i\\cos\\theta_i-n_t\\cos\\theta_t}{n_i\\cos\\theta_i+n_t\\cos\\theta_t} r_p=\\frac{n_t\\cos\\theta_i-n_i\\cos\\theta_t}{n_t\\cos\\theta_i+n_i\\cos\\theta_t} r_p=\\frac{n_t\\cos\\theta_i-n_i\\cos\\theta_t}{n_t\\cos\\theta_i+n_i\\cos\\theta_t} Fr=\\frac{r_s^2+r_p^2}{2} Fr=\\frac{r_s^2+r_p^2}{2} Snell law : n_i\\sin\\theta_i=n_t\\sin\\theta_t n_i\\sin\\theta_i=n_t\\sin\\theta_t \u53ef\u4ee5\u7528\u6765\u7b80\u5316\u53c2\u6570 Dielectric-Conductor \u00b6 r_s=\\frac{n_i\\cos\\theta_i-(n_t-\\mathbf{i}k_t)\\cos\\theta_t}{n_i\\cos\\theta_i+(n_t-\\mathbf{i}k_t)\\cos\\theta_t} r_s=\\frac{n_i\\cos\\theta_i-(n_t-\\mathbf{i}k_t)\\cos\\theta_t}{n_i\\cos\\theta_i+(n_t-\\mathbf{i}k_t)\\cos\\theta_t} r_p=\\frac{(n_t-\\mathbf{i}k_t)\\cos\\theta_i-n_i\\cos\\theta_t}{(n_t-\\mathbf{i}k_t)\\cos\\theta_i+n_i\\cos\\theta_t} r_p=\\frac{(n_t-\\mathbf{i}k_t)\\cos\\theta_i-n_i\\cos\\theta_t}{(n_t-\\mathbf{i}k_t)\\cos\\theta_i+n_i\\cos\\theta_t} Fr=\\frac{r_s^2+r_p^2}{2}=\\frac{R_s+R_p}{2} Fr=\\frac{r_s^2+r_p^2}{2}=\\frac{R_s+R_p}{2} \\begin{array}{l}{a^{2}=\\frac{1}{2 n_{i}^{2}}\\left(\\sqrt{\\left(n_{t}^{2}-k_{t}^{2}-n_{i}^{2} \\sin ^{2} \\theta\\right)^{2}+4 n_{t}^{2} k_{t}^{2}}+n_{t}^{2}-k_{t}^{2}-n_{i}^{2} \\sin ^{2} \\theta\\right)} \\\\ {b^{2}=\\frac{1}{2 n_{i}^{2}}\\left(\\sqrt{\\left(n_{t}^{2}-k_{t}^{2}-n_{i}^{2} \\sin ^{2} \\theta\\right)^{2}+4 n_{t}^{2} k_{t}^{2}}-n_{t}^{2}+k_{t}^{2}+n_{i}^{2} \\sin ^{2} \\theta\\right)} \\\\ {R_{s}=\\frac{a^{2}+b^{2}-2 a \\cos \\theta+\\cos ^{2} \\theta}{a^{2}+b^{2}+2 a \\cos \\theta+\\cos ^{2} \\theta}} \\\\ {R_{p}=R_{s} \\frac{a^{2}+b^{2}-2 a \\sin \\theta \\tan \\theta+\\sin ^{2} \\theta \\tan ^{2} \\theta}{\\theta \\tan ^{2} \\theta}}\\end{array} \\begin{array}{l}{a^{2}=\\frac{1}{2 n_{i}^{2}}\\left(\\sqrt{\\left(n_{t}^{2}-k_{t}^{2}-n_{i}^{2} \\sin ^{2} \\theta\\right)^{2}+4 n_{t}^{2} k_{t}^{2}}+n_{t}^{2}-k_{t}^{2}-n_{i}^{2} \\sin ^{2} \\theta\\right)} \\\\ {b^{2}=\\frac{1}{2 n_{i}^{2}}\\left(\\sqrt{\\left(n_{t}^{2}-k_{t}^{2}-n_{i}^{2} \\sin ^{2} \\theta\\right)^{2}+4 n_{t}^{2} k_{t}^{2}}-n_{t}^{2}+k_{t}^{2}+n_{i}^{2} \\sin ^{2} \\theta\\right)} \\\\ {R_{s}=\\frac{a^{2}+b^{2}-2 a \\cos \\theta+\\cos ^{2} \\theta}{a^{2}+b^{2}+2 a \\cos \\theta+\\cos ^{2} \\theta}} \\\\ {R_{p}=R_{s} \\frac{a^{2}+b^{2}-2 a \\sin \\theta \\tan \\theta+\\sin ^{2} \\theta \\tan ^{2} \\theta}{\\theta \\tan ^{2} \\theta}}\\end{array} \u5b9e\u9645\u8ba1\u7b97\u4e2d\u53d6 \\eta=\\frac{\\eta_t}{\\eta_i} \\eta=\\frac{\\eta_t}{\\eta_i} , \\eta_k={k_t\\over n_i} \\eta_k={k_t\\over n_i} , \\theta=\\theta_i \\theta=\\theta_i \\begin{array}{l}{a^{2}=\\frac{1}{2}\\left(\\sqrt{\\left(\\eta^{2}-\\eta_{k}^{2}-\\sin ^{2} \\theta\\right)^{2}+4 \\eta^{2} \\eta_{k}^{2}}+\\eta^{2}-\\eta_{k}^{2}-\\sin ^{2} \\theta\\right)} \\\\ {b^{2}=\\frac{1}{2}\\left(\\sqrt{\\left(\\eta^{2}-\\eta_{k}^{2}-\\sin ^{2} \\theta\\right)^{2}+4 \\eta^{2} \\eta_{k}^{2}}-\\eta^{2}+\\eta_{k}^{2}+\\sin ^{2} \\theta\\right)}\\end{array} \\begin{array}{l}{a^{2}=\\frac{1}{2}\\left(\\sqrt{\\left(\\eta^{2}-\\eta_{k}^{2}-\\sin ^{2} \\theta\\right)^{2}+4 \\eta^{2} \\eta_{k}^{2}}+\\eta^{2}-\\eta_{k}^{2}-\\sin ^{2} \\theta\\right)} \\\\ {b^{2}=\\frac{1}{2}\\left(\\sqrt{\\left(\\eta^{2}-\\eta_{k}^{2}-\\sin ^{2} \\theta\\right)^{2}+4 \\eta^{2} \\eta_{k}^{2}}-\\eta^{2}+\\eta_{k}^{2}+\\sin ^{2} \\theta\\right)}\\end{array} \u7528\u4e0b\u5217\u5f0f\u5b50\u53ef\u4ee5\u7b80\u5316\u8ba1\u7b97 \\begin{array}{l}{a^{2}+b^{2}=\\sqrt{\\left(\\eta^{2}-\\eta_{k}^{2}-\\sin ^{2} \\theta\\right)^{2}+4 \\eta^{2} \\eta_{k}^{2}}} \\\\ {\\tan \\theta=\\frac{\\sin \\theta}{\\cos \\theta}} \\\\ {R_{p}=R_{s} \\frac{\\cos ^{2} \\theta\\left(a^{2}+b^{2}\\right)-2 a \\cos \\theta \\sin ^{2} \\theta+\\sin ^{4} \\theta}{\\cos ^{2} \\theta\\left(a^{2}+b^{2}\\right)+2 a \\cos \\theta \\sin ^{2} \\theta+\\sin ^{4} \\theta}}\\end{array} \\begin{array}{l}{a^{2}+b^{2}=\\sqrt{\\left(\\eta^{2}-\\eta_{k}^{2}-\\sin ^{2} \\theta\\right)^{2}+4 \\eta^{2} \\eta_{k}^{2}}} \\\\ {\\tan \\theta=\\frac{\\sin \\theta}{\\cos \\theta}} \\\\ {R_{p}=R_{s} \\frac{\\cos ^{2} \\theta\\left(a^{2}+b^{2}\\right)-2 a \\cos \\theta \\sin ^{2} \\theta+\\sin ^{4} \\theta}{\\cos ^{2} \\theta\\left(a^{2}+b^{2}\\right)+2 a \\cos \\theta \\sin ^{2} \\theta+\\sin ^{4} \\theta}}\\end{array} Fresnel Schlick\u2019s approximation \u00b6 Fr=R(0)+(1-R(0))(1-\\cos \\theta)^{5} Fr=R(0)+(1-R(0))(1-\\cos \\theta)^{5} \u5bf9\u4e8econductor R(0)=\\frac{\\left(n_{t}-n_{i}\\right)^{2}+k_{t}^{2}}{\\left(n_{t}+n_{i}\\right)^{2}+k_{t}^{2}}=\\frac{(\\eta-1)^{2}+\\eta_{k}^{2}}{(\\eta+1)^{2}+\\eta_{k}^{2}} R(0)=\\frac{\\left(n_{t}-n_{i}\\right)^{2}+k_{t}^{2}}{\\left(n_{t}+n_{i}\\right)^{2}+k_{t}^{2}}=\\frac{(\\eta-1)^{2}+\\eta_{k}^{2}}{(\\eta+1)^{2}+\\eta_{k}^{2}} \u5bf9\u4e8edielectric R(0)=\\frac{\\left(n_{t}-n_{i}\\right)^{2}}{\\left(n_{t}+n_{i}\\right)^{2}}=\\frac{(\\eta-1)^{2}}{(\\eta+1)^{2}} R(0)=\\frac{\\left(n_{t}-n_{i}\\right)^{2}}{\\left(n_{t}+n_{i}\\right)^{2}}=\\frac{(\\eta-1)^{2}}{(\\eta+1)^{2}} Microfacet \u00b6 f_r(\\omega_i,\\omega_o)=\\frac{D(\\omega_h)G(\\omega_i,\\omega_o)F_r(\\omega_o)}{4\\cos\\theta_o\\cos\\theta_i} f_r(\\omega_i,\\omega_o)=\\frac{D(\\omega_h)G(\\omega_i,\\omega_o)F_r(\\omega_o)}{4\\cos\\theta_o\\cos\\theta_i} \u5176\u4e2d D D \u4e3a\u6cd5\u7ebf\u5206\u5e03\u51fd\u6570\uff0c G G \u4e3a\u9634\u5f71\u906e\u6321\u9879\uff0c F_r F_r \u4e3a\u83f2\u5c3c\u5c14\u9879 \u9634\u5f71\u906e\u853d\u9879G(Masking and Shadowing) \u00b6 reference \u00b6 Memo on Fresnel equations. https://seblagarde.wordpress.com/2013/04/29/memo-on-fresnel-equations/","title":"Reflection"},{"location":"graphics/rendering/reflection/#reflection","text":"","title":"Reflection"},{"location":"graphics/rendering/reflection/#lambertian","text":"f_r=\\frac{R}{\\pi} f_r=\\frac{R}{\\pi} \u4e3a\u4ec0\u4e48\u6709 \\pi \\pi \\rho_{\\mathrm{hd}} \\rho_{\\mathrm{hd}} \u4ee3\u8868\u534a\u7403\u4e0a\u603b\u53cd\u7167\u5ea6 \\rho_{\\mathrm{hd}}\\left(\\omega_{\\mathrm{o}}\\right)=\\int_{\\mathrm{H}^{2}(\\mathrm{n})} f_{\\mathrm{r}}\\left(\\mathrm{p}, \\omega_{\\mathrm{o}}, \\omega_{\\mathrm{i}}\\right)\\left|\\cos \\theta_{\\mathrm{i}}\\right| \\mathrm{d} \\omega_{\\mathrm{i}} \\rho_{\\mathrm{hd}}\\left(\\omega_{\\mathrm{o}}\\right)=\\int_{\\mathrm{H}^{2}(\\mathrm{n})} f_{\\mathrm{r}}\\left(\\mathrm{p}, \\omega_{\\mathrm{o}}, \\omega_{\\mathrm{i}}\\right)\\left|\\cos \\theta_{\\mathrm{i}}\\right| \\mathrm{d} \\omega_{\\mathrm{i}} \u56e0\u4e3aLambertian\u7684brdf\u662f\u5e38\u91cf\u503c\u6240\u4ee5 \\rho_{\\mathrm{hd}}=R \\rho_{\\mathrm{hd}}=R ,\u800c f_{\\mathrm{r}} f_{\\mathrm{r}} \u4e0e \\omega_{\\mathrm{o}},\\omega_{\\mathrm{i}},\\mathrm{p} \\omega_{\\mathrm{o}},\\omega_{\\mathrm{i}},\\mathrm{p} \u65e0\u5173\uff0c\u6240\u4ee5Lambertian BRDF\u7b49\u4e8e \\frac{\\rho_{\\mathrm{hd}}}{\\int_{\\mathrm{H}^2}\\left|\\cos\\theta_{\\mathrm{i}}\\right|\\mathrm{d}\\omega_{\\mathrm{i}}} \\frac{\\rho_{\\mathrm{hd}}}{\\int_{\\mathrm{H}^2}\\left|\\cos\\theta_{\\mathrm{i}}\\right|\\mathrm{d}\\omega_{\\mathrm{i}}} ,\u5bf9\u534a\u7403\u79ef\u5206\u53ef\u4ee5\u5f97\u5230 \\pi \\pi \u5173\u4e8e\u534a\u7403\u79ef\u5206 \\int_{\\mathrm{H}^2}\\left|\\cos\\theta_{\\mathrm{i}}\\right|\\mathrm{d}\\omega_{\\mathrm{i}} \\\\ =\\int_{\\phi=0}^{2\\pi}\\int_{\\theta=0}^{\\pi \\over 2}\\cos\\theta\\sin\\theta\\mathrm{d}\\theta\\mathrm{d}\\mathrm{\\phi}=\\pi \\int_{\\mathrm{H}^2}\\left|\\cos\\theta_{\\mathrm{i}}\\right|\\mathrm{d}\\omega_{\\mathrm{i}} \\\\ =\\int_{\\phi=0}^{2\\pi}\\int_{\\theta=0}^{\\pi \\over 2}\\cos\\theta\\sin\\theta\\mathrm{d}\\theta\\mathrm{d}\\mathrm{\\phi}=\\pi \u8fd0\u7528 \\sin2\\theta=2\\sin\\theta\\cos\\theta \\sin2\\theta=2\\sin\\theta\\cos\\theta \u5c31\u5f88\u597d\u8ba1\u7b97\u4e86","title":"Lambertian"},{"location":"graphics/rendering/reflection/#fresnell","text":"","title":"Fresnell\u516c\u5f0f"},{"location":"graphics/rendering/reflection/#dielectric-dielectric","text":"r_s=\\frac{n_i\\cos\\theta_i-n_t\\cos\\theta_t}{n_i\\cos\\theta_i+n_t\\cos\\theta_t} r_s=\\frac{n_i\\cos\\theta_i-n_t\\cos\\theta_t}{n_i\\cos\\theta_i+n_t\\cos\\theta_t} r_p=\\frac{n_t\\cos\\theta_i-n_i\\cos\\theta_t}{n_t\\cos\\theta_i+n_i\\cos\\theta_t} r_p=\\frac{n_t\\cos\\theta_i-n_i\\cos\\theta_t}{n_t\\cos\\theta_i+n_i\\cos\\theta_t} Fr=\\frac{r_s^2+r_p^2}{2} Fr=\\frac{r_s^2+r_p^2}{2} Snell law : n_i\\sin\\theta_i=n_t\\sin\\theta_t n_i\\sin\\theta_i=n_t\\sin\\theta_t \u53ef\u4ee5\u7528\u6765\u7b80\u5316\u53c2\u6570","title":"Dielectric-Dielectric"},{"location":"graphics/rendering/reflection/#dielectric-conductor","text":"r_s=\\frac{n_i\\cos\\theta_i-(n_t-\\mathbf{i}k_t)\\cos\\theta_t}{n_i\\cos\\theta_i+(n_t-\\mathbf{i}k_t)\\cos\\theta_t} r_s=\\frac{n_i\\cos\\theta_i-(n_t-\\mathbf{i}k_t)\\cos\\theta_t}{n_i\\cos\\theta_i+(n_t-\\mathbf{i}k_t)\\cos\\theta_t} r_p=\\frac{(n_t-\\mathbf{i}k_t)\\cos\\theta_i-n_i\\cos\\theta_t}{(n_t-\\mathbf{i}k_t)\\cos\\theta_i+n_i\\cos\\theta_t} r_p=\\frac{(n_t-\\mathbf{i}k_t)\\cos\\theta_i-n_i\\cos\\theta_t}{(n_t-\\mathbf{i}k_t)\\cos\\theta_i+n_i\\cos\\theta_t} Fr=\\frac{r_s^2+r_p^2}{2}=\\frac{R_s+R_p}{2} Fr=\\frac{r_s^2+r_p^2}{2}=\\frac{R_s+R_p}{2} \\begin{array}{l}{a^{2}=\\frac{1}{2 n_{i}^{2}}\\left(\\sqrt{\\left(n_{t}^{2}-k_{t}^{2}-n_{i}^{2} \\sin ^{2} \\theta\\right)^{2}+4 n_{t}^{2} k_{t}^{2}}+n_{t}^{2}-k_{t}^{2}-n_{i}^{2} \\sin ^{2} \\theta\\right)} \\\\ {b^{2}=\\frac{1}{2 n_{i}^{2}}\\left(\\sqrt{\\left(n_{t}^{2}-k_{t}^{2}-n_{i}^{2} \\sin ^{2} \\theta\\right)^{2}+4 n_{t}^{2} k_{t}^{2}}-n_{t}^{2}+k_{t}^{2}+n_{i}^{2} \\sin ^{2} \\theta\\right)} \\\\ {R_{s}=\\frac{a^{2}+b^{2}-2 a \\cos \\theta+\\cos ^{2} \\theta}{a^{2}+b^{2}+2 a \\cos \\theta+\\cos ^{2} \\theta}} \\\\ {R_{p}=R_{s} \\frac{a^{2}+b^{2}-2 a \\sin \\theta \\tan \\theta+\\sin ^{2} \\theta \\tan ^{2} \\theta}{\\theta \\tan ^{2} \\theta}}\\end{array} \\begin{array}{l}{a^{2}=\\frac{1}{2 n_{i}^{2}}\\left(\\sqrt{\\left(n_{t}^{2}-k_{t}^{2}-n_{i}^{2} \\sin ^{2} \\theta\\right)^{2}+4 n_{t}^{2} k_{t}^{2}}+n_{t}^{2}-k_{t}^{2}-n_{i}^{2} \\sin ^{2} \\theta\\right)} \\\\ {b^{2}=\\frac{1}{2 n_{i}^{2}}\\left(\\sqrt{\\left(n_{t}^{2}-k_{t}^{2}-n_{i}^{2} \\sin ^{2} \\theta\\right)^{2}+4 n_{t}^{2} k_{t}^{2}}-n_{t}^{2}+k_{t}^{2}+n_{i}^{2} \\sin ^{2} \\theta\\right)} \\\\ {R_{s}=\\frac{a^{2}+b^{2}-2 a \\cos \\theta+\\cos ^{2} \\theta}{a^{2}+b^{2}+2 a \\cos \\theta+\\cos ^{2} \\theta}} \\\\ {R_{p}=R_{s} \\frac{a^{2}+b^{2}-2 a \\sin \\theta \\tan \\theta+\\sin ^{2} \\theta \\tan ^{2} \\theta}{\\theta \\tan ^{2} \\theta}}\\end{array} \u5b9e\u9645\u8ba1\u7b97\u4e2d\u53d6 \\eta=\\frac{\\eta_t}{\\eta_i} \\eta=\\frac{\\eta_t}{\\eta_i} , \\eta_k={k_t\\over n_i} \\eta_k={k_t\\over n_i} , \\theta=\\theta_i \\theta=\\theta_i \\begin{array}{l}{a^{2}=\\frac{1}{2}\\left(\\sqrt{\\left(\\eta^{2}-\\eta_{k}^{2}-\\sin ^{2} \\theta\\right)^{2}+4 \\eta^{2} \\eta_{k}^{2}}+\\eta^{2}-\\eta_{k}^{2}-\\sin ^{2} \\theta\\right)} \\\\ {b^{2}=\\frac{1}{2}\\left(\\sqrt{\\left(\\eta^{2}-\\eta_{k}^{2}-\\sin ^{2} \\theta\\right)^{2}+4 \\eta^{2} \\eta_{k}^{2}}-\\eta^{2}+\\eta_{k}^{2}+\\sin ^{2} \\theta\\right)}\\end{array} \\begin{array}{l}{a^{2}=\\frac{1}{2}\\left(\\sqrt{\\left(\\eta^{2}-\\eta_{k}^{2}-\\sin ^{2} \\theta\\right)^{2}+4 \\eta^{2} \\eta_{k}^{2}}+\\eta^{2}-\\eta_{k}^{2}-\\sin ^{2} \\theta\\right)} \\\\ {b^{2}=\\frac{1}{2}\\left(\\sqrt{\\left(\\eta^{2}-\\eta_{k}^{2}-\\sin ^{2} \\theta\\right)^{2}+4 \\eta^{2} \\eta_{k}^{2}}-\\eta^{2}+\\eta_{k}^{2}+\\sin ^{2} \\theta\\right)}\\end{array} \u7528\u4e0b\u5217\u5f0f\u5b50\u53ef\u4ee5\u7b80\u5316\u8ba1\u7b97 \\begin{array}{l}{a^{2}+b^{2}=\\sqrt{\\left(\\eta^{2}-\\eta_{k}^{2}-\\sin ^{2} \\theta\\right)^{2}+4 \\eta^{2} \\eta_{k}^{2}}} \\\\ {\\tan \\theta=\\frac{\\sin \\theta}{\\cos \\theta}} \\\\ {R_{p}=R_{s} \\frac{\\cos ^{2} \\theta\\left(a^{2}+b^{2}\\right)-2 a \\cos \\theta \\sin ^{2} \\theta+\\sin ^{4} \\theta}{\\cos ^{2} \\theta\\left(a^{2}+b^{2}\\right)+2 a \\cos \\theta \\sin ^{2} \\theta+\\sin ^{4} \\theta}}\\end{array} \\begin{array}{l}{a^{2}+b^{2}=\\sqrt{\\left(\\eta^{2}-\\eta_{k}^{2}-\\sin ^{2} \\theta\\right)^{2}+4 \\eta^{2} \\eta_{k}^{2}}} \\\\ {\\tan \\theta=\\frac{\\sin \\theta}{\\cos \\theta}} \\\\ {R_{p}=R_{s} \\frac{\\cos ^{2} \\theta\\left(a^{2}+b^{2}\\right)-2 a \\cos \\theta \\sin ^{2} \\theta+\\sin ^{4} \\theta}{\\cos ^{2} \\theta\\left(a^{2}+b^{2}\\right)+2 a \\cos \\theta \\sin ^{2} \\theta+\\sin ^{4} \\theta}}\\end{array}","title":"Dielectric-Conductor"},{"location":"graphics/rendering/reflection/#fresnel-schlicks-approximation","text":"Fr=R(0)+(1-R(0))(1-\\cos \\theta)^{5} Fr=R(0)+(1-R(0))(1-\\cos \\theta)^{5} \u5bf9\u4e8econductor R(0)=\\frac{\\left(n_{t}-n_{i}\\right)^{2}+k_{t}^{2}}{\\left(n_{t}+n_{i}\\right)^{2}+k_{t}^{2}}=\\frac{(\\eta-1)^{2}+\\eta_{k}^{2}}{(\\eta+1)^{2}+\\eta_{k}^{2}} R(0)=\\frac{\\left(n_{t}-n_{i}\\right)^{2}+k_{t}^{2}}{\\left(n_{t}+n_{i}\\right)^{2}+k_{t}^{2}}=\\frac{(\\eta-1)^{2}+\\eta_{k}^{2}}{(\\eta+1)^{2}+\\eta_{k}^{2}} \u5bf9\u4e8edielectric R(0)=\\frac{\\left(n_{t}-n_{i}\\right)^{2}}{\\left(n_{t}+n_{i}\\right)^{2}}=\\frac{(\\eta-1)^{2}}{(\\eta+1)^{2}} R(0)=\\frac{\\left(n_{t}-n_{i}\\right)^{2}}{\\left(n_{t}+n_{i}\\right)^{2}}=\\frac{(\\eta-1)^{2}}{(\\eta+1)^{2}}","title":"Fresnel Schlick\u2019s approximation"},{"location":"graphics/rendering/reflection/#microfacet","text":"f_r(\\omega_i,\\omega_o)=\\frac{D(\\omega_h)G(\\omega_i,\\omega_o)F_r(\\omega_o)}{4\\cos\\theta_o\\cos\\theta_i} f_r(\\omega_i,\\omega_o)=\\frac{D(\\omega_h)G(\\omega_i,\\omega_o)F_r(\\omega_o)}{4\\cos\\theta_o\\cos\\theta_i} \u5176\u4e2d D D \u4e3a\u6cd5\u7ebf\u5206\u5e03\u51fd\u6570\uff0c G G \u4e3a\u9634\u5f71\u906e\u6321\u9879\uff0c F_r F_r \u4e3a\u83f2\u5c3c\u5c14\u9879","title":"Microfacet"},{"location":"graphics/rendering/reflection/#gmasking-and-shadowing","text":"","title":"\u9634\u5f71\u906e\u853d\u9879G(Masking and Shadowing)"},{"location":"graphics/rendering/reflection/#reference","text":"Memo on Fresnel equations. https://seblagarde.wordpress.com/2013/04/29/memo-on-fresnel-equations/","title":"reference"},{"location":"graphics/simulation/basic_def/","text":"Basic \u00b6 Material Derivative \u00b6 \\frac{\\mathrm{D}\\mathbf{A}}{\\mathrm{D}t} \\equiv \\frac{\\partial \\mathbf{A}}{\\partial t} + \\mathbf{u}\\cdot\\nabla\\mathbf{A} \\frac{\\mathrm{D}\\mathbf{A}}{\\mathrm{D}t} \\equiv \\frac{\\partial \\mathbf{A}}{\\partial t} + \\mathbf{u}\\cdot\\nabla\\mathbf{A} \\mathbf{A} \\mathbf{A} is vector filed and \\mathbf{u} \\mathbf{u} is the flow velocity Navier\u2013Stokes equations \u00b6 momentum equation \\rho\\frac{\\mathrm{D}\\mathbf{u}}{\\mathrm{D}t}=-\\nabla p+\\mu\\nabla^2\\mathbf{u}+\\rho\\mathbf{g} \\rho\\frac{\\mathrm{D}\\mathbf{u}}{\\mathrm{D}t}=-\\nabla p+\\mu\\nabla^2\\mathbf{u}+\\rho\\mathbf{g} \\rho \\rho is the density, p p is the pressure","title":"Basic"},{"location":"graphics/simulation/basic_def/#basic","text":"","title":"Basic"},{"location":"graphics/simulation/basic_def/#material-derivative","text":"\\frac{\\mathrm{D}\\mathbf{A}}{\\mathrm{D}t} \\equiv \\frac{\\partial \\mathbf{A}}{\\partial t} + \\mathbf{u}\\cdot\\nabla\\mathbf{A} \\frac{\\mathrm{D}\\mathbf{A}}{\\mathrm{D}t} \\equiv \\frac{\\partial \\mathbf{A}}{\\partial t} + \\mathbf{u}\\cdot\\nabla\\mathbf{A} \\mathbf{A} \\mathbf{A} is vector filed and \\mathbf{u} \\mathbf{u} is the flow velocity","title":"Material Derivative"},{"location":"graphics/simulation/basic_def/#navierstokes-equations","text":"momentum equation \\rho\\frac{\\mathrm{D}\\mathbf{u}}{\\mathrm{D}t}=-\\nabla p+\\mu\\nabla^2\\mathbf{u}+\\rho\\mathbf{g} \\rho\\frac{\\mathrm{D}\\mathbf{u}}{\\mathrm{D}t}=-\\nabla p+\\mu\\nabla^2\\mathbf{u}+\\rho\\mathbf{g} \\rho \\rho is the density, p p is the pressure","title":"Navier\u2013Stokes equations"},{"location":"graphics/simulation/sph/","text":"Smoothed Particle Hydrodynamics \u00b6 \u628a\u8fde\u7eed\u7a7a\u95f4\u5212\u5206\u6210\u4f53\u79ef\u5143 V_j V_j ,\u6bcf\u4e2a\u4f53\u79ef\u5143\u5305\u542b\u4e00\u4e2a\u7c92\u5b50,\u8fd9\u4e2a\u7c92\u5b50\u7684\u7269\u7406\u91cf\u4e3a A_j A_j , A(\\mathbf{r}) A(\\mathbf{r}) \u4e3a\u7a7a\u95f4\u4e2d\u5904\u5728\u4f4d\u7f6e \\mathbf{r} \\mathbf{r} \u7684\u7c92\u5b50\u7684\u7269\u7406\u91cf A(\\mathbf{r}) A(\\mathbf{r}) \u53ef\u4ee5\u8868\u793a\u4e3a A(\\mathbf{r})=\\sum_j A_j\\frac{m_j}{\\rho_j}W(\\mathbf{r}-\\mathbf{r_j},h) A(\\mathbf{r})=\\sum_j A_j\\frac{m_j}{\\rho_j}W(\\mathbf{r}-\\mathbf{r_j},h) \u540c\u7406 \\nabla A(\\mathbf{r})=\\sum_j A_j\\frac{m_j}{\\rho_j}\\nabla W(\\mathbf{r}-\\mathbf{r_j},h) \\nabla A(\\mathbf{r})=\\sum_j A_j\\frac{m_j}{\\rho_j}\\nabla W(\\mathbf{r}-\\mathbf{r_j},h) SPH\u8ba1\u7b97\u5404\u79cd\u7269\u7406\u91cf \u00b6 \u5bc6\u5ea6 \u00b6 \\rho(\\mathbf{r_i})=\\sum_j m_j W(\\mathbf{r}_i-\\mathbf{r}_j,h) \\rho(\\mathbf{r_i})=\\sum_j m_j W(\\mathbf{r}_i-\\mathbf{r}_j,h) \u8868\u9762\u6cd5\u7ebf \u00b6 \\mathbf{n}(\\boldsymbol{r})=\\sum_j \\frac{m_J}{\\rho_j}\\nabla^2W(\\mathbf{r}-\\mathbf{r}_j, h) \\mathbf{n}(\\boldsymbol{r})=\\sum_j \\frac{m_J}{\\rho_j}\\nabla^2W(\\mathbf{r}-\\mathbf{r}_j, h) \u538b\u529b$$ \u00b6 \\mathbf{f}_{i}=-\\rho_{i} \\sum_{j \\neq i}(\\frac{p_{i}}{\\rho_{i}}+\\frac{p_{j}}{\\rho_{j}}) m_{j} \\nabla W(\\mathbf{r}_{i}-\\mathbf{r}_{j}, h) \\mathbf{f}_{i}=-\\rho_{i} \\sum_{j \\neq i}(\\frac{p_{i}}{\\rho_{i}}+\\frac{p_{j}}{\\rho_{j}}) m_{j} \\nabla W(\\mathbf{r}_{i}-\\mathbf{r}_{j}, h) \u6cbe\u6027\u529b(viscosity force) \u00b6 \\mathbf{f}_{i}=\\mu\\sum_{j\\neq i}(\\mathbf{u}_j-\\mathbf{u}_i)\\frac{m_j}{\\rho_j}\\nabla^2W(\\boldsymbol{r}_i-\\boldsymbol{r}_j, h) \\mathbf{f}_{i}=\\mu\\sum_{j\\neq i}(\\mathbf{u}_j-\\mathbf{u}_i)\\frac{m_j}{\\rho_j}\\nabla^2W(\\boldsymbol{r}_i-\\boldsymbol{r}_j, h) \u8868\u9762\u5f20\u529b(surface tension force) \u00b6 \\mathbf{f}_{i}=-\\sigma\\frac{\\mathbf{n}_{i}}{\\left\\|\\mathbf{n}_{i}\\right\\|}\\sum_j\\frac{m_j}{\\rho_j}\\nabla^2W(\\boldsymbol{r}_i-\\boldsymbol{r}_j, h) \\mathbf{f}_{i}=-\\sigma\\frac{\\mathbf{n}_{i}}{\\left\\|\\mathbf{n}_{i}\\right\\|}\\sum_j\\frac{m_j}{\\rho_j}\\nabla^2W(\\boldsymbol{r}_i-\\boldsymbol{r}_j, h) \u6838\u51fd\u6570 \u00b6 Poly6 \u00b6 W(\\mathbf{r}, h)=\\left\\{\\begin{array}{ll}{\\frac{315}{64 \\pi k^{9}}\\left(h^{2}-r^{2}\\right)^{3}} & {0 \\leq r \\leq h} \\\\ {0} & {\\text { otherwise }}\\end{array}\\right. W(\\mathbf{r}, h)=\\left\\{\\begin{array}{ll}{\\frac{315}{64 \\pi k^{9}}\\left(h^{2}-r^{2}\\right)^{3}} & {0 \\leq r \\leq h} \\\\ {0} & {\\text { otherwise }}\\end{array}\\right. \u9002\u7528\u4e8e\u63d2\u503c\u5bc6\u5ea6 Spiky \u00b6 W(\\mathbf{r}, h)=\\left\\{\\begin{array}{ll}{\\frac{15}{\\pi h^{6}}(h-r)^{3}\\left(r^{2}-\\frac{3}{4}\\left(h^{2}-r^{2}\\right)\\right)} & {0 \\leq r \\leq h} \\\\ {0} & {\\text { otherwise }}\\end{array}\\right. W(\\mathbf{r}, h)=\\left\\{\\begin{array}{ll}{\\frac{15}{\\pi h^{6}}(h-r)^{3}\\left(r^{2}-\\frac{3}{4}\\left(h^{2}-r^{2}\\right)\\right)} & {0 \\leq r \\leq h} \\\\ {0} & {\\text { otherwise }}\\end{array}\\right. \u9002\u7528\u4e8e\u63d2\u503c\u538b\u529b \u6cbe\u5ea6\u6838 \u00b6 W(\\mathbf{r}, h)=\\left\\{\\begin{array}{ll}{\\frac{15}{2 \\pi h^{3}}\\left(-\\frac{r^{3}}{2 h^{3}}+\\frac{r^{2}}{h^{2}}+\\frac{h}{2 r}-1\\right)} & {0 \\leq r \\leq h} \\\\ {0} & {\\text { otherwise }}\\end{array}\\right. W(\\mathbf{r}, h)=\\left\\{\\begin{array}{ll}{\\frac{15}{2 \\pi h^{3}}\\left(-\\frac{r^{3}}{2 h^{3}}+\\frac{r^{2}}{h^{2}}+\\frac{h}{2 r}-1\\right)} & {0 \\leq r \\leq h} \\\\ {0} & {\\text { otherwise }}\\end{array}\\right. \u9002\u7528\u4e8e\u6cbe\u6027\u529b","title":"SPH"},{"location":"graphics/simulation/sph/#smoothed-particle-hydrodynamics","text":"\u628a\u8fde\u7eed\u7a7a\u95f4\u5212\u5206\u6210\u4f53\u79ef\u5143 V_j V_j ,\u6bcf\u4e2a\u4f53\u79ef\u5143\u5305\u542b\u4e00\u4e2a\u7c92\u5b50,\u8fd9\u4e2a\u7c92\u5b50\u7684\u7269\u7406\u91cf\u4e3a A_j A_j , A(\\mathbf{r}) A(\\mathbf{r}) \u4e3a\u7a7a\u95f4\u4e2d\u5904\u5728\u4f4d\u7f6e \\mathbf{r} \\mathbf{r} \u7684\u7c92\u5b50\u7684\u7269\u7406\u91cf A(\\mathbf{r}) A(\\mathbf{r}) \u53ef\u4ee5\u8868\u793a\u4e3a A(\\mathbf{r})=\\sum_j A_j\\frac{m_j}{\\rho_j}W(\\mathbf{r}-\\mathbf{r_j},h) A(\\mathbf{r})=\\sum_j A_j\\frac{m_j}{\\rho_j}W(\\mathbf{r}-\\mathbf{r_j},h) \u540c\u7406 \\nabla A(\\mathbf{r})=\\sum_j A_j\\frac{m_j}{\\rho_j}\\nabla W(\\mathbf{r}-\\mathbf{r_j},h) \\nabla A(\\mathbf{r})=\\sum_j A_j\\frac{m_j}{\\rho_j}\\nabla W(\\mathbf{r}-\\mathbf{r_j},h)","title":"Smoothed Particle Hydrodynamics"},{"location":"graphics/simulation/sph/#sph","text":"","title":"SPH\u8ba1\u7b97\u5404\u79cd\u7269\u7406\u91cf"},{"location":"graphics/simulation/sph/#_1","text":"\\rho(\\mathbf{r_i})=\\sum_j m_j W(\\mathbf{r}_i-\\mathbf{r}_j,h) \\rho(\\mathbf{r_i})=\\sum_j m_j W(\\mathbf{r}_i-\\mathbf{r}_j,h)","title":"\u5bc6\u5ea6"},{"location":"graphics/simulation/sph/#_2","text":"\\mathbf{n}(\\boldsymbol{r})=\\sum_j \\frac{m_J}{\\rho_j}\\nabla^2W(\\mathbf{r}-\\mathbf{r}_j, h) \\mathbf{n}(\\boldsymbol{r})=\\sum_j \\frac{m_J}{\\rho_j}\\nabla^2W(\\mathbf{r}-\\mathbf{r}_j, h)","title":"\u8868\u9762\u6cd5\u7ebf"},{"location":"graphics/simulation/sph/#_3","text":"\\mathbf{f}_{i}=-\\rho_{i} \\sum_{j \\neq i}(\\frac{p_{i}}{\\rho_{i}}+\\frac{p_{j}}{\\rho_{j}}) m_{j} \\nabla W(\\mathbf{r}_{i}-\\mathbf{r}_{j}, h) \\mathbf{f}_{i}=-\\rho_{i} \\sum_{j \\neq i}(\\frac{p_{i}}{\\rho_{i}}+\\frac{p_{j}}{\\rho_{j}}) m_{j} \\nabla W(\\mathbf{r}_{i}-\\mathbf{r}_{j}, h)","title":"\u538b\u529b$$"},{"location":"graphics/simulation/sph/#viscosity-force","text":"\\mathbf{f}_{i}=\\mu\\sum_{j\\neq i}(\\mathbf{u}_j-\\mathbf{u}_i)\\frac{m_j}{\\rho_j}\\nabla^2W(\\boldsymbol{r}_i-\\boldsymbol{r}_j, h) \\mathbf{f}_{i}=\\mu\\sum_{j\\neq i}(\\mathbf{u}_j-\\mathbf{u}_i)\\frac{m_j}{\\rho_j}\\nabla^2W(\\boldsymbol{r}_i-\\boldsymbol{r}_j, h)","title":"\u6cbe\u6027\u529b(viscosity force)"},{"location":"graphics/simulation/sph/#surface-tension-force","text":"\\mathbf{f}_{i}=-\\sigma\\frac{\\mathbf{n}_{i}}{\\left\\|\\mathbf{n}_{i}\\right\\|}\\sum_j\\frac{m_j}{\\rho_j}\\nabla^2W(\\boldsymbol{r}_i-\\boldsymbol{r}_j, h) \\mathbf{f}_{i}=-\\sigma\\frac{\\mathbf{n}_{i}}{\\left\\|\\mathbf{n}_{i}\\right\\|}\\sum_j\\frac{m_j}{\\rho_j}\\nabla^2W(\\boldsymbol{r}_i-\\boldsymbol{r}_j, h)","title":"\u8868\u9762\u5f20\u529b(surface tension force)"},{"location":"graphics/simulation/sph/#_4","text":"","title":"\u6838\u51fd\u6570"},{"location":"graphics/simulation/sph/#poly6","text":"W(\\mathbf{r}, h)=\\left\\{\\begin{array}{ll}{\\frac{315}{64 \\pi k^{9}}\\left(h^{2}-r^{2}\\right)^{3}} & {0 \\leq r \\leq h} \\\\ {0} & {\\text { otherwise }}\\end{array}\\right. W(\\mathbf{r}, h)=\\left\\{\\begin{array}{ll}{\\frac{315}{64 \\pi k^{9}}\\left(h^{2}-r^{2}\\right)^{3}} & {0 \\leq r \\leq h} \\\\ {0} & {\\text { otherwise }}\\end{array}\\right. \u9002\u7528\u4e8e\u63d2\u503c\u5bc6\u5ea6","title":"Poly6"},{"location":"graphics/simulation/sph/#spiky","text":"W(\\mathbf{r}, h)=\\left\\{\\begin{array}{ll}{\\frac{15}{\\pi h^{6}}(h-r)^{3}\\left(r^{2}-\\frac{3}{4}\\left(h^{2}-r^{2}\\right)\\right)} & {0 \\leq r \\leq h} \\\\ {0} & {\\text { otherwise }}\\end{array}\\right. W(\\mathbf{r}, h)=\\left\\{\\begin{array}{ll}{\\frac{15}{\\pi h^{6}}(h-r)^{3}\\left(r^{2}-\\frac{3}{4}\\left(h^{2}-r^{2}\\right)\\right)} & {0 \\leq r \\leq h} \\\\ {0} & {\\text { otherwise }}\\end{array}\\right. \u9002\u7528\u4e8e\u63d2\u503c\u538b\u529b","title":"Spiky"},{"location":"graphics/simulation/sph/#_5","text":"W(\\mathbf{r}, h)=\\left\\{\\begin{array}{ll}{\\frac{15}{2 \\pi h^{3}}\\left(-\\frac{r^{3}}{2 h^{3}}+\\frac{r^{2}}{h^{2}}+\\frac{h}{2 r}-1\\right)} & {0 \\leq r \\leq h} \\\\ {0} & {\\text { otherwise }}\\end{array}\\right. W(\\mathbf{r}, h)=\\left\\{\\begin{array}{ll}{\\frac{15}{2 \\pi h^{3}}\\left(-\\frac{r^{3}}{2 h^{3}}+\\frac{r^{2}}{h^{2}}+\\frac{h}{2 r}-1\\right)} & {0 \\leq r \\leq h} \\\\ {0} & {\\text { otherwise }}\\end{array}\\right. \u9002\u7528\u4e8e\u6cbe\u6027\u529b","title":"\u6cbe\u5ea6\u6838"},{"location":"ml/cv/basic/","text":"\u5377\u79ef\u8f93\u5165\u8f93\u51fa\u7279\u5f81\u56fe\u5c3a\u5bf8\u5927\u5c0f\u8ba1\u7b97 \u00b6 L_\\text{out}=\\lfloor \\frac{L_\\text{in}+2\\times \\text{padding}-\\text{dilation}\\times(\\text{kernel\\_size}-1)-1}{\\text{stride}}+1\\rfloor L_\\text{out}=\\lfloor \\frac{L_\\text{in}+2\\times \\text{padding}-\\text{dilation}\\times(\\text{kernel\\_size}-1)-1}{\\text{stride}}+1\\rfloor","title":"Basic"},{"location":"ml/cv/basic/#_1","text":"L_\\text{out}=\\lfloor \\frac{L_\\text{in}+2\\times \\text{padding}-\\text{dilation}\\times(\\text{kernel\\_size}-1)-1}{\\text{stride}}+1\\rfloor L_\\text{out}=\\lfloor \\frac{L_\\text{in}+2\\times \\text{padding}-\\text{dilation}\\times(\\text{kernel\\_size}-1)-1}{\\text{stride}}+1\\rfloor","title":"\u5377\u79ef\u8f93\u5165\u8f93\u51fa\u7279\u5f81\u56fe\u5c3a\u5bf8\u5927\u5c0f\u8ba1\u7b97"}]}